# S3 Remote State Configuration

## Overview
This document describes how to configure Terraform to use AWS S3 as a remote backend for state management with state locking.

## Backend Configuration

### main.tf
Configure the S3 backend in your Terraform configuration:

```hcl
tf
  backend "s3" {
    encrypt = true
  }
}
```

### Partial Configuration
Use partial configuration to keep sensitive data out of version control. See [Terraform Backend Configuration Documentation](https://www.terraform.io/docs/backends/config.html#partial-configuration).

#### Example: config/backend-dev.conf
```hcl
bucket         = "<account_id>-terraform-states"
key            = "development/service-name.tfstate"
encrypt        = true
region         = "ap-southeast-2"
dynamodb_table = "terraform-lock"
```

## Prerequisites
Ensure you have the following files configured:
- `config/backend-${env}.conf` - Backend configuration file
- `config/${env}.tfvars` - Environment-specific variables

## Workflow Commands

Initialize and plan your Terraform configuration:

```bash
# Set environment variable
env=dev

# Update dependencies
tf get -update=true

# Initialize with backend configuration
tf init -backend-config=config/backend-${env}.conf

# Plan changes with environment variables
tf plan -var-file=config/${env}.tfvars

# Apply changes
tf apply -var-file=config/${env}.tfvars
```

## Environment Variables
Create a `config/dev.tfvars` file to set environment-specific values for your resources.